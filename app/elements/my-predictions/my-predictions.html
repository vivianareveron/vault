<link rel="import" href="..\..\bower_components/polymer/polymer.html">

<polymer-element name="my-predictions" attributes="">
  <template>
    <link rel="stylesheet" href="my-predictions.css">
     
    
       <the-predictions id="predictions"></the-predictions>
       <log-in id="logIn"></log-in>
      
             <template repeat="{{p in mine}}">   
                 <paper-shadow layout center>
                  
                      <div flex class="predheader">  <core-image src="{{p.avatar}}" preload fade cover center></core-image>
                    <div flex>{{p.userName}}</div>
                    <div flex>{{p.title}}</div>
                </div>
                <div flex class="predcontent">
                    <div flex>Created:{{p.created}}</div> 
                    <div flex>To be opened by:{{p.openedBy}}</div>
                    <div flex>Category: {{p.category}}</div>
                    <div flex><p>{{p.content}}</p></div>
                </div>
                  </paper-shadow>      
                    </template> 
      
      
      
  </template>
  <script>
    (function () {
      Polymer({
        // define element prototype here
            ready: function(){
             
              console.log(this.$.predictions.users[0].userName);
              
              this.mine = [];
              
             
              var predictionsArray = this.$.predictions.usersPredictions;
              var credentials = this.$.logIn;     
              console.log(credentials.loggedIn);     
            
              for(var i =0; i < predictionsArray.length; i++){      
                if( predictionsArray[i].userId == 0){ //Hard coded, change to logged in
                
                    var newObject = 
                                    {
                                        userName: credentials.loggedIn,
                                        avatar: credentials.avatar,
                                        title: predictionsArray[i].title, 
                                        created: predictionsArray[i].created,
                                        openedBy: predictionsArray[i].openedBy,
                                        category: predictionsArray[i].category,
                                        content: predictionsArray[i].content
                                    };
                
                this.mine.push(newObject); 
                    console.log(this.mine[i]);
                  }
              } 
            
            }
                   
      });
    })();
  </script>
</polymer-element>
