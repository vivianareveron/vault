<link rel="import" href="..\..\bower_components/polymer/polymer.html">

<polymer-element name="the-latests" attributes="">
  <template>
    
        <link rel="stylesheet" href="the-latests.css">
     
      <the-predictions id="predictions"></the-predictions>
       <log-in id="logIn"></log-in>
      
             <template repeat="{{latest| orderBy('created')}}">   
                 <paper-shadow layout center>
                  
               <div flex class="predheader">  
                    <core-image src="{{avatar}}" preload fade cover center></core-image>
                    <div flex>{{userName}}</div>
                    <div flex>{{title}}</div>
                </div>
                <div flex class="predcontent">
                    <div flex>Created: {{created | date('yyyy-MM-dd HH:mm:ss')}}</div> 
                    <div flex>To be opened by: {{openedBy}}</div>
                    <div flex>Category: {{category}}</div>
                    <div flex><p>{{content}}</p></div>
                </div>
                  </paper-shadow>      
                    </template> 
      
  </template>
  <script>
    (function () {
      Polymer({
        // define element prototype here
        ready: function(){
             
              console.log(this.$.predictions.users[0].userName);
              
              this.latest = [];
              
             
              var predictionsArray = this.$.predictions.usersPredictions;
              var usersArray = this.$.predictions.users;    
              var credentials = this.$.logIn;     
              console.log(usersArray);     
            
              
            
            
            
              for(var i =0; i < predictionsArray.length; i++){      
    
                 
                 
                    var newObject = 
                                    {
                                        userName: predictionsArray[i].userName,
                                        avatar: predictionsArray[i].avatar,
                                        title: predictionsArray[i].title, 
                                        created: predictionsArray[i].created,
                                        openedBy: predictionsArray[i].openedBy,
                                        category: predictionsArray[i].category,
                                        content: predictionsArray[i].content
                                    };
                
                this.latest.push(newObject); 
                    
                  }    
            
        }
      });
    })();
  </script>
</polymer-element>
